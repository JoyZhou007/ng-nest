<form (ngSubmit)="submit()" [formGroup]="formGroup">
  <ng-container [ngSwitch]="controlsType">
    <ng-container *ngSwitchCase="'controls'">
      <nu-row>
        <ng-container
          *ngTemplateOutlet="controlsTemp; context: { controls: nuControls }"
        >
        </ng-container>
      </nu-row>
    </ng-container>
    <ng-container *ngSwitchCase="'rows'">
      <ng-container
        *ngTemplateOutlet="rowsTemp; context: { rows: nuControls }"
      ></ng-container>
    </ng-container>
  </ng-container>
</form>

<ng-template #rowsTemp let-rows="rows">
  <ng-container *ngFor="let row of rows">
    <nu-row *ngIf="!row.nuHidden" [ngClass]="{ 'nu-hidden': row.title }">
      <ng-container
        *ngTemplateOutlet="titleTemp; context: { row: row }"
      ></ng-container>
      <ng-container
        *ngTemplateOutlet="controlsTemp; context: { controls: row.controls }"
      ></ng-container>
    </nu-row>
  </ng-container>
</ng-template>

<ng-template #controlsTemp let-controls="controls">
  <nu-col *ngFor="let control of controls" [nuSpan]="control.nuSpan">
    <nu-control [nuOption]="control"></nu-control>
  </nu-col>
</ng-template>

<ng-template #titleTemp let-row="row">
  <div class="title">
    <label>
      <span *ngIf="row.icon" class="{{ row.icon }}"></span>
      <span>{{ row.title }}</span>
    </label>
  </div>
</ng-template>
